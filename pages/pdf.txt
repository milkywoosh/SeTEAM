import { Box } from '@chakra-ui/layout';
import { Button } from '@chakra-ui/react';
import { useRef, useState } from 'react';
import styles from '../styles/uploader.module.css';;
import firebase from '../config/firebase';
// import { Viewer, Worker } from '@react-pdf-viewer/core'; // install this library

export default function Uploader (){
  
  const pdfRef = useRef();
  var storage = firebase.storage();
  
  const [error,setError] = useState('');

  function handleSubmit(e){
    e.preventDefault();
    const file = e.target[0].files[0];
    var storageRef = storage.ref('studentPDF/'+ file.name.type);
    
    if(pdfRef.current.value !== null){
      storageRef.put(pdfRef).then((snapshot)=>{
        console.log('success');
      });
    }
  }
  function handleDownload(){
    e.preventDefault();
    const file = e.target[0].files[0];
    var pathReferences = storage.get('studentPDF'+ file.name);
    return pathReferences;
    
  }
  return(
    <Box className={styles.pdfContainer} >
      <form>
        {/* <progress value='0' max='100'>0%</progress> */}
        <input type={'file'} ref={pdfRef} />
        <Button type='submit' colorScheme="teal"  onSubmit={handleSubmit} >Upload</Button>
        <Button type='submit' colorScheme="teal" onSubmit={handleDownload} >Download</Button>
      </form>
      <h4>View PDF</h4>
      <div className='pdf-container'>

      </div>
    </Box>
  );
}